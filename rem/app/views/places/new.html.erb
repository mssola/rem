<% title 'New place' %>

<% if @place.errors.any? %>
  <div class="error_messages">
    <h2>Form is invalid</h2>
    <ul>
      <% for message in @place.errors.full_messages %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>
  <div>
        <div class='input'>
            <label>Address : </label> <input id="addresspicker_map" />   <br/>
                        <label>Locality: </label> <input id="locality" disabled=disabled> <br/>
                        <label>Country:  </label> <input id="country" disabled=disabled> <br/>
                        <label>Lat:      </label> <input id="lat" disabled=disabled> <br/>
                        <label>Lng:      </label> <input id="lng" disabled=disabled> <br/>
    </div>
    <div id="map"></div>
    <div id="legend">You can drag and drop the marker to the correct location</div>
</div>
<%= form_for @place do |f| %>
  <fieldset class="textbox">
    <div class="prompt name">
      <%= r_label :name_label, 'Place name' %>
      <%= f.text_field :name, { class: 'r_text_field' } %>
    </div>
    <div class="prompt desc">
      <%= r_label :desc_label, 'Description' %>
      <span id="desc_adv">(About this place in less than 160 chars.)</span>
      <%= f.text_area :desc, { class: 'r_text_area' } %>
    </div>
    <%= r_label :combo_routes, 'Add to the following route:' %>
    <% list = Route.all.map { |o| [o.name, o.id] } %>
    <%= f.select(:route_id, list) %>
    <%= r_submit 'Create place' %>
  </fieldset>
<% end %> 
